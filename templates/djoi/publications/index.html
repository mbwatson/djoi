{% extends 'base.html' %}

{% block content %}

    <h1>Publications</h1>
    
    <div class="div-list publications">    
        {% for publication in publications %}
            
            <div class="div-list__item publication">
            
                <h4 class="publication__title">{{ publication.title }}</h4>
                
                <div class="publication__authors">
                    <ul>
                        {% for author in publication.author.all %}
                            <li style="list-style: none;">
                                <!--
                                    If author is in staff list,
                                    show link to page.
                                    Generate slugs in view to pass in,
                                    and check for slug here.
                                -->
                                {{ author.name }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            
                <div class="citation__text doi{{ publication.doi|slugify }}">
                    {{ publication.citation }}                    
                </div>

                <div class="publication__meta">
                    <a class="citation__toggler" href="#">
                        <i class="fas fa-tag" data-doi="{{ publication.doi|slugify }}" ></i>
                    </a>
                    <a class="meta__external-link" href="https://doi.org/{{ publication.doi }}" target="_blank">
                        <i class="fas fa-external-link-square-alt"></i>
                    </a>
                </div>
            
            </div>

        {% endfor %}
    </div>

    <div class="div-list__item citation-dialog">
        <div class="citation-dialog__header">
            <div class="citation-dialog__title">Title</div>
            <div class="citation-dialog__close-button">
                <i class="fa fa-times" aria-hidden="true"></i>
            </div>
        </div>
        <div class="citation-dialog__text"></div>
    </div>

    <div class="dialog-backdrop"></div>

    {% load static %} {# Generates the absolute URL of static files #}
    <script type="text/javascript" src="{% static 'js/citation-toggler.js' %}"></script>

{% endblock content %}